<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="initial-scale=1.0, user-scalable=no"  />
		<title>GrubHub - Suggestions on places to eat!</title>

		<!--Styles-->
		<link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.0/css/bootstrap-combined.min.css" rel="stylesheet" />
		<link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.0/css/bootstrap-responsive.min.css" rel="stylesheet" />
		<link href="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.1/themes/flick/jquery-ui.css" rel="stylesheet" />
		<link href="style.min.css" rel="stylesheet" />
		<link href="animate.min.css" rel="stylesheet" />
		
		<!--Scripts-->
		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
		<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.1/jquery-ui.min.js"></script>
		<script src="//maps.googleapis.com/maps/api/js?libraries=places&key=AIzaSyDZ5qi0Zo-6BAKuS7EFpYBNCs4iia2sOeg&sensor=true"></script>
		<script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.0/js/bootstrap.min.js" type="text/javascript"></script>
		<script src="script.js" type="text/javascript"></script>
		<script src="jquery.walkabout.js"></script>
		

		<script type="text/javascript">
			$(document).ready(function () {
				var $menu = $('.options .menu');
				var $command = $('.options .toggle');

				//Create options
				var options = [
					{ key: "distance", type: "slider", label: "Travel Distance", value: 5, placeholder: "", position: "#header", class: "search-distance" },
					{ key: "foodtype", type: "textfield", label: "I want", value: "sushi", placeholder: "try sushi, thai, burger", position: ".menu" }
				]

				//Create option UI elements
				options.forEach(function (option) {
					
					//Create wrapper html
					var wrapper = '<div class="item ' + option.class + '">' + (option.label ? '<label>' + option.label + (option.type == 'slider' ? ' <span class="value"><span class="max">' + option.value + '</span>km</span>' : "") + '</label>' : "") + '{0}' + '</div>';

					switch(option.type)
					{
						case "slider":
							$(option.position).append(wrapper.replace('{0}', '<span class="amount"></span><div id="' + option.key + "-" + option.type + '" class="slider"></div>'));
							$("#" + option.key + "-" + option.type).slider({
								value: option.value, step: 1, min: 1, max: 20, slide: function (event, ui) {
									$(".max").html(ui.value);
								}
							});
							break;

						case "textfield":
							$(option.position).append(wrapper.replace('{0}', '<input type="text" id="' + option.key + "-" + option.type + '" class="textfield" placeholder="' + option.placeholder + '"></input>'));
							break;
					}
				});

				//Toggle options UI view
				$('.toggle').click(function () {
					$menu.slideToggle(150);
					$command.children('i').toggleClass("icon-minus");
				});

				//Hide options with ESC key
				$(document).keyup(function (e) {
					if (e.keyCode == 27 && $menu.is(":visible")) {
						$command.click();
					}
				});

				//Hide menu when not focused
				$(document).mouseup(function (e) {
					if ($menu.has(e.target).length === 0 && $menu.is(":visible") && !$(e.target).hasClass("toggle") && !$(e.target).parent(".toggle").hasClass("toggle")) {
						$command.click();
					}
				});

				$(window).resize(function () {
					$("#center").center();
				});

				$("#center").center();

				//Animated rotation
				$(".command .btn").click(function () {
					$target = $(this).children('[class*="icon-"]');
					var animations = 'animated rotate';
					$target.addClass(animations);
					var wait = window.setTimeout(function () { $target.removeClass(animations) }, 1500);
				});
			});

			//Center plugin, http://stackoverflow.com/a/210733/612113
			jQuery.fn.center = function () {
				this.css("position", "absolute");
				this.css("top", Math.max(0, (($(window).height() - $(this).outerHeight()) / 2) + $(window).scrollTop()) + "px");
				this.css("left", Math.max(0, (($(window).width() - $(this).outerWidth()) / 2) + $(window).scrollLeft()) + "px");
				return this;
			}
		</script>
	</head>
	<body>
		<div class="row-fluid">
			
			<!--Header-->
			<div id="header" class="header navbar-fixed-top">
				<!--Options Menu-->
				<div class="options">
					<div id="menu" class="menu"></div>
					<a class="command toggle btn btn-small btn-inverse">Advanced <i class="icon-white icon-cog" title="Customize Search Options"></i></a>
				</div>
			</div>
			
			<!--Content-->
			<div id="center" class="center"></div>

			<!--Footer-->
			<div id="footer" class="footer navbar-fixed-bottom">
				<form id="search-form" class="shadow search-form" onSubmit="return false;">
					<div class="span5 row-fluid">
						<div class="span12">
							<i class="icon-globe search-icon"></i>
							<input autofocus id="search" type="text" size="50" placeholder="I want lunch around ... try Toronto, ON" autocomplete="off" />
							<div class="command">
								<button class="btn btn btn-primary no-radius" type="submit" title="Search"><i class="icon-white icon-refresh"></i></button>
							</div>
						</div>
					</div>
				</form>
			</div>

			<!--Map-->
			<div id="map_canvas" class="map-canvas"></div>
		</div>
	</body>
</html>